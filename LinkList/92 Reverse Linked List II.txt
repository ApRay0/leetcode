class Solution {
public:
    ListNode* reverseBetween(ListNode* head, int m, int n) {
        ListNode* res=new ListNode(0);
        ListNode *h,*p;
        res->next=head;
        h=res;
        for(int i=0;i<m-1;i++){
            h=h->next;
        }
        p=h->next;
        for(int i=0;i<n-m;i++){
            ListNode* q=p->next;
            p->next=q->next;
            q->next=h->next;/////cant use p
            h->next=q;
        }
        return res->next;
    }
};

